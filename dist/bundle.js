(()=>{"use strict";class t{constructor(t){this.displayedText=t}}class e{constructor(t){if(!t)throw new Error("Must supply an id");this.id=t}}class s{constructor(){this.nodeIdToNode=[],this.currentId=1}append(t){let e=this.#t(t);this.head?(this.#e(e),this.tail=e):this.head=e}toArray(){let t=[];return this.head&&this.#s(t),t}getTopNodeAsArray(t){let e=[];return t>0&&this.head&&this.#i(e,t),e}removeNode(t){if(!this.nodeIdToNode[t])return;let e=this.nodeIdToNode[t];e&&(e!=this.head?e!=this.tail?e.next&&this.#o(e):this.#d():this.#r())}#t(t){let s=new e(this.currentId++);return this.nodeIdToNode[s.id]=s,s.value=t,s}#e(t){this.tail?(this.tail.next=t,t.prev=this.tail):(this.head.next=t,t.prev=this.head)}#s(t){t.push(this.head);let e=this.head.next;for(;e;)t.push(e),e=e.next}#i(t,e){t.push(this.head);let s=e-1,i=this.head.next;for(;s-- >0&&i;)t.push(i),i=i.next}#d(){this.tail=this.tail.prev,this.tail.next=void 0}#r(){this.head.next?this.head=this.head.next:this.head=void 0}#o(t){t.prev.next=t.next,t.next.prev=t.prev}}class i{static orderedListTagName="ol";static listItemTagName="li";static buttonTagName="button";static deleteButtonName="Delete";static deleteButtonTextContent=i.deleteButtonName;static#l="[name='"+i.deleteButtonName+"']";build(t){let e=this.#n();for(const s of t){let t=this.#a(s);e.append(t)}return e}withListCssClass(t){return this.listCssClass=t,this}withListItemsCssClass(t){return this.listItemCssClass=t,this}withDeleteButtons(){return this.hasDeleteButtons=!0,this}static getAllDeleteButtons(t){return t.querySelectorAll(this.#l)}#n(){let t=document.createElement(i.orderedListTagName);return t.className=this.listCssClass,t}#a(t){let e=document.createElement(i.listItemTagName);return e.innerText=t.value.displayedText,e.className=this.listItemCssClass,this.hasDeleteButtons&&e.append(this.#h(t.id)),e}#h(t){let e=document.createElement(i.buttonTagName);return e.value=t,e.name=i.deleteButtonName,e.textContent=i.deleteButtonTextContent,e.setAttribute("type","button"),e}}class o{static inputTagName="input";constructor(t){this.todoList=t}withInputField(){return this.hasInputField=!0,this}build(){let t=document.createElement("div");return this.hasInputField&&this.#u(t),this.#m(t),t}#u(t){let e=this.#p();this.#c(e,t),t.appendChild(e)}#m(t){let e=this.#N();this.#T(e,t),t.appendChild(e)}#p(){let t=document.createElement(o.inputTagName);return t.setAttribute("aria-label","add to do list"),t.setAttribute("placeholder","Add to do list"),t}#c(t,e){t.addEventListener("keyup",(t=>{this.#L(t,e)}))}#L(t,e){"Enter"===t.key&&(this.#g(t.target.value,e),t.target.value="")}#g(t,e){this.todoList.add(t),this.#I(e)}#I(t){this.#v(t),this.#m(t)}#v(t){for(let e of t.getElementsByTagName(i.orderedListTagName))e.remove()}#N(){return(new i).withListCssClass("ordered-todo-list").withListItemsCssClass("ordered-todo-list--items").withDeleteButtons().build(this.todoList.getAll())}#T(t,e){let s=i.getAllDeleteButtons(t);this.#w(s,e)}#w(t,e){for(let s of t)s.addEventListener("click",(t=>{this.#E(Number(t.target.value),e)}))}#E(t,e){this.todoList.removeById(t),this.#I(e)}}var d=new class{constructor(){this.todoList=new s}add(e){this.todoList.append(new t(e))}getAll(){return this.todoList.toArray()}getTop(t){return this.todoList.getTopNodeAsArray(t)}removeById(t){this.todoList.removeNode(t)}};document.body.append(new o(d).withInputField().build())})();